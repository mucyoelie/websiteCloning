/*@license For license information please refer to blossom-customer-notifications.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7292],{55048:function(e,t,n){n.r(t),n.d(t,{CustomerNotificationsWrapper:function(){return Y},default:function(){return X}});var i,l=n(96540),a=n(49811),r=n(55461),o=n(31370),c=n(10159),s=n(95196),u=n(16484),d=n(94495),m=n(68963),f=n(82960),v=n(90745),E=n(15144),p=n(94220),b=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,l,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(l)throw l.error}}return r},h={H:"LODGING",P:"PACKAGES",F:"FLIGHT",C:"CAR",CR:"CRUISES",A:"ACTIVITIES",U:"UNCLASSIFIED",R:"RAILS",GT:"GROUNDTRANSFERS"},g=function(e){return h[e]||"UNCLASSIFIED"},y={0:"SYSTEM",10:"ENTRY",20:"SEARCH_RESULTS",30:"DETAILS",40:"CHECKOUT",50:"CHECKOUT_ERROR",60:"PAYMENT_ERROR",70:"CONFIRMATION",80:"POST_BOOKING",90:"USER",500:"FEATURES"},x=function(e){var t=b(e.pageId.split(",").map((function(e){return e.trim()})),3);return{pageId:t[0],lineOfBusiness:t[1],funnelLocation:t[2]}},k=function(e){return y[e]||"ENTRY"},w=function(e,t){e&&e.forEach((function(e){if("NotificationAnalytics"===e.__typename){var n=e.description;t(e.referrerId,n)}}))},N=function(e,t,n,i){return new(n||(n=Promise))((function(l,a){function r(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((i=i.apply(e,t||[])).next())}))},C=function(e,t){var n,i,l,a,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(r=0)),r;)try{if(n=1,i&&(l=2&o[0]?i.return:o[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,o[1])).done)return l;switch(i=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=r.trys,(l=l.length>0&&l[l.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(c){o=[6,c],i=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},S=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,l,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(l)throw l.error}}return r},O=(0,o.inject)("chatbot")((0,o.observer)((function(e){var t,n=e.link,i=e.analyticsCallback,a=e.chatbot,r=e.closeDialog,o=S(l.useState(!1),2),c=o[0],s=o[1];l.useEffect((function(){N(void 0,void 0,void 0,(function(){var e,t;return C(this,(function(n){switch(n.label){case 0:return e=s,(t=void 0!==a)?[4,a.isVirtualAgentInitialized(window)]:[3,2];case 1:t=n.sent(),n.label=2;case 2:return e.apply(void 0,[t]),[2]}}))}))}),[]);var m="openChatbot"===(null==n?void 0:n.id)&&c,f=m?"#":null===(t=null==n?void 0:n.uri)||void 0===t?void 0:t.value;return l.createElement(E.j,{minWidth:"full_width"},l.createElement(u.i,{border:!0},l.createElement(p.b,{padding:"three"},l.createElement(u.m,null,l.createElement(E.i,{justifyContent:"space-between",alignItems:"center",className:"cardContentContainer"},l.createElement(E.j,null,l.createElement("div",null,l.createElement(v.c,{weight:"medium"},null==n?void 0:n.text))),l.createElement(E.j,null,l.createElement(d.a,{name:"chevron_right"}))))),l.createElement(u.q,null,m?l.createElement("a",{onClick:function(e){e.preventDefault(),i&&w(null==n?void 0:n.actions,i),r(),m&&a&&a.openChatWidget()},href:f},null==n?void 0:n.text):l.createElement("a",{onClick:function(e){i&&w(null==n?void 0:n.actions,i)},href:f},null==n?void 0:n.text))))}))),R=n(66168),_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,l,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(l)throw l.error}}return r},T=function(e){var t,n,i=_((0,c.useDialog)("covid-19-dialog"),3),a=i[0],r=i[1],o=i[2],u=l.createRef(),d={context:e.inputs.context,notificationLocation:"POPUP",lineOfBusiness:g(e.inputs.lineOfBusiness),funnelLocation:k(e.inputs.funnelLocation)},b=(0,s.I)(R.Ww,{variables:d}),h=b.data,y=b.error,x=b.loading;if(y||x||!h||!(null==h?void 0:h.notification)||!(null===(t=null==h?void 0:h.notification)||void 0===t?void 0:t.inlineNotification))return null;var w=(null===(n=null==h?void 0:h.notification)||void 0===n?void 0:n.inlineNotification)||{},N=w.title,C=w.links,S=null==N?void 0:N.items[0].text;return l.createElement(m.h,{isVisible:a},l.createElement(o,null,l.createElement(m.e,{isVisible:a,triggerRef:u,type:"full"},l.createElement(f.b,{key:"EGDSToolbar",navigationContent:{onClick:r.closeDialog}}),l.createElement(m.f,{key:"covid-credit-container"},l.createElement(p.b,{padding:{blockstart:"six"}},l.createElement("div",{key:"cta-dialog-heading"},l.createElement(v.E,{tag:"h2",size:3},S))),l.createElement(p.b,{padding:{block:"six"}},l.createElement(E.i,{space:"two",wrap:"wrap"},l.createElement(l.Fragment,null,null==C?void 0:C.map((function(t,n){return l.createElement(O,{key:"customer-notification-action-link-".concat(n),analyticsCallback:e.analyticsCallback,link:t,closeDialog:r.closeDialog})})))))))))},I=n(46198),A=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,l,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(l)throw l.error}}return r},L=function(e){var t,n=A((0,c.useDialog)("covid-19-dialog"),2)[1],i={context:e.inputs.context,notificationLocation:e.inputs.location,lineOfBusiness:g(e.inputs.lineOfBusiness),funnelLocation:k(e.inputs.funnelLocation)},a=e.analyticsCallback,r=e.className,o=void 0===r?"":r,m=(0,s.I)(R.Ww,{variables:i}),f=m.data,b=m.error,h=m.loading;if(b||h||!f||!(null==f?void 0:f.notification)||!(null==f?void 0:f.notification.inlineNotification)||!f.notification.inlineNotification.body)return null;var y=f.notification.inlineNotification,x=y.title,N=y.body,C=y.links,S=null==x?void 0:x.items[0].text,O=null===(t=null==N?void 0:N[0])||void 0===t?void 0:t.items[0].text,_=null==C?void 0:C.map((function(e){var t=e.text,n=e.uri,i=e.icon,l=e.actions;return{text:t,href:null==n?void 0:n.value,icon:i,actions:l}})),L=null==_?void 0:_.shift();return l.createElement("div",{"data-testid":"customer-notification-with-dialog","data-stid":"customer-notifications",className:o},l.createElement(T,{inputs:{context:e.inputs.context,lineOfBusiness:e.inputs.lineOfBusiness,funnelLocation:e.inputs.funnelLocation},analyticsCallback:e.analyticsCallback}),l.createElement(u.i,{border:!0,padded:!0,className:"travel-advisory-with-chatbot-link"},l.createElement(E.i,{alignItems:"center",space:"three"},l.createElement(E.j,null,l.createElement(d.a,{spotlight:{theme:"info",background:!0},name:"help",size:d.E.MEDIUM})),l.createElement(E.j,null,l.createElement("div",null,l.createElement(v.E,{tag:"h4"},S),l.createElement(v.a,null,O),l.createElement(p.b,{padding:{blockstart:"two"}},l.createElement(E.i,{space:"six"},l.createElement(I.E,{onClick:function(e){n.openDialog(),w(L.actions,a)}},l.createElement("a",null,null==L?void 0:L.text)))))))))},W=(0,o.inject)("analytics","context","page")((function(e){var t=e.analytics,n=e.context,i=e.location,a=e.page,o=e.className;if(!a||!a.pageId||!n)return null;var c=x(a);return l.createElement(p.b,{margin:{blockend:"three"}},l.createElement("div",null,l.createElement(L,{inputs:{context:(0,r.getBexApiContext)(n),lineOfBusiness:c.lineOfBusiness,funnelLocation:c.funnelLocation,location:i},analyticsCallback:function(e,n){null==t||t.trackEvent(e,n||"RFRR Action Event",t.omnitureData,null,!0)},className:o})))})),D=n(12098),B=n(67226),j=function(e,t,n,i){return new(n||(n=Promise))((function(l,a){function r(e){try{c(i.next(e))}catch(t){a(t)}}function o(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((i=i.apply(e,t||[])).next())}))},U=function(e,t){var n,i,l,a,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(r=0)),r;)try{if(n=1,i&&(l=2&o[0]?i.return:o[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,o[1])).done)return l;switch(i=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=r.trys,(l=l.length>0&&l[l.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(c){o=[6,c],i=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},F={pencil:"mode_edit",coin:"monetization_on",chat:"chat"},z=(0,o.inject)("chatbot")((0,o.observer)((function(e){var t,n,a,r=e.link,o=e.analyticsCallback,c=e.chatbot,s=e.maxWidth,m=e.minWidth,f=e.index,b=e.version,h=e.body,g="openChatbot",y=null==h?void 0:h.items[0],x=null==h?void 0:h.items[1],k=null==h?void 0:h.items[2],N={id:(null==r?void 0:r.id)||(null==k?void 0:k.id),url:(null===(t=null==r?void 0:r.uri)||void 0===t?void 0:t.value)||(null===(n=null==k?void 0:k.uri)||void 0===n?void 0:n.value),actions:(null==r?void 0:r.actions)||(null==k?void 0:k.actions),text:(null==r?void 0:r.text)||(null==y?void 0:y.text),subText:(null==x?void 0:x.text)||"",iconName:(null===(a=null==k?void 0:k.icon)||void 0===a?void 0:a.id)||""},C=N.id===g||"cancelChangeTrip"===N.id||"covidManageYourTrip"===N.id,S="covidRedeemCredits"===N.id,O=["https://forever.travel-assets.com/flex/flexmanager/images/2020/07/09/calendar_busy.svg","https://forever.travel-assets.com/flex/flexmanager/images/2020/07/09/voucher.svg","https://forever.travel-assets.com/flex/flexmanager/images/2020/07/09/approved.svg","https://forever.travel-assets.com/flex/flexmanager/images/2020/11/04/coupons_cut.svg"],R={intent:D.s9.REFUND_STATUS},_={intent:D.s9.VIEW_BOOKING},T={launchPoint:"ReasonsToBelieve",pageName:"StoreFront"},I=function(e){return j(void 0,void 0,void 0,(function(){var t,n,i;return U(this,(function(l){switch(l.label){case 0:return e.preventDefault(),o&&w(N.actions,o),c&&C?[4,c.isVirtualAgentInitialized(window)]:[3,3];case 1:return l.sent()?(t=g===N.id?R:_,[4,c.startConversation(T,t)]):[3,3];case 2:return l.sent()||(window.location.href=null!==(n=N.url)&&void 0!==n?n:"#"),[2];case 3:return window.location.href=null!==(i=N.url)&&void 0!==i?i:"#",[2]}}))}))},A=l.createElement(u.i,{padded:!0},l.createElement(E.i,{alignItems:"center",space:"six"},l.createElement(E.j,{minWidth:48,shrink:0},l.createElement("div",null,l.createElement(B.a,{ratio:B.E.R1_1},l.createElement(B.b,{src:O[f],alt:N.text})))),l.createElement(E.j,{grow:1},l.createElement(v.E,{tag:"h3",size:5},N.text))),l.createElement(u.q,null,l.createElement("button",{type:"button",onClick:I},N.text))),L=l.createElement(u.i,{border:!0},l.createElement(p.b,{padding:{block:"four",inline:"three"}},l.createElement("div",null,l.createElement(E.i,{alignItems:"center",justifyContent:"space-between"},l.createElement(E.j,null,l.createElement(v.E,{tag:"h3",size:5},N.text))),l.createElement(p.b,{padding:{blockstart:"one"}},l.createElement("div",null,l.createElement(v.c,{size:200},N.subText))))),l.createElement(u.q,null,l.createElement("button",{type:"button",onClick:I},N.text))),W=l.createElement(u.i,{border:!0,padded:!0},l.createElement(p.b,{padding:{blockend:"two",blockstart:"two"}},l.createElement(E.i,null,l.createElement(E.j,{minWidth:65,grow:1},l.createElement("div",null,l.createElement(B.a,{ratio:B.E.R1_1},l.createElement(B.b,{src:O[3],alt:N.text})))),l.createElement(E.j,{grow:1},l.createElement(p.b,{padding:{inlinestart:"two"}},l.createElement("div",null,l.createElement(v.E,{tag:"h3",size:5},N.text),l.createElement(p.b,{padding:{blockstart:"one"}},l.createElement("div",null,l.createElement(v.c,{size:200},N.subText)))))))),l.createElement(u.q,null,l.createElement("button",{type:"button",onClick:I},N.text))),z=l.createElement(u.i,{border:!0,padded:!0},l.createElement(p.b,{padding:{blockend:"two",blockstart:"two"}},l.createElement(E.i,{alignItems:"center"},l.createElement(E.j,{minWidth:48,shrink:0},l.createElement("div",null,l.createElement(B.a,{ratio:B.E.R1_1},l.createElement(B.b,{src:{calendar_busy:"https://forever.travel-assets.com/flex/flexmanager/images/2020/07/09/calendar_busy.svg",coupons_cut:"https://forever.travel-assets.com/flex/flexmanager/images/2020/11/04/coupons_cut.svg",suitcase:"https://forever.travel-assets.com/flex/flexmanager/images/2020/11/20/suitcase.svg",quotes:"https://forever.travel-assets.com/flex/flexmanager/images/2022/07/01/quote.svg"}[null==N?void 0:N.iconName],alt:"",role:"presentation"})))),l.createElement(E.j,{shrink:1},l.createElement(p.b,{padding:{inlinestart:"three"}},l.createElement("div",null,l.createElement(v.E,{tag:"h3",size:5},N.text),l.createElement(p.b,{padding:{blockstart:"one"}},l.createElement("div",null,l.createElement(v.c,{size:300},N.subText)))))),l.createElement(u.q,null,l.createElement("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",onClick:function(){o&&w(N.actions,o)}},N.text))))),G=l.createElement(u.i,{border:!0,padded:!0},l.createElement(p.b,{padding:{blockend:"one",blockstart:"one"}},l.createElement(E.i,null,l.createElement(E.j,{shrink:1,minWidth:"full_width"},l.createElement("div",null,l.createElement(v.E,{tag:"h3",size:5},N.text),l.createElement(p.b,{padding:{blockstart:"two"}},l.createElement("div",null,l.createElement(v.c,{size:200},N.subText))))),l.createElement(E.j,{minWidth:16,maxWidth:16,shrink:0,alignSelf:"start"},l.createElement(d.a,{name:F[null==N?void 0:N.iconName],size:d.E.SMALL})))),l.createElement(u.q,null,l.createElement("button",{onClick:I},N.text)));return l.createElement(E.j,{grow:1,maxWidth:s,minWidth:m},b===i.ONE&&A,b===i.TWO&&S&&W,b===i.TWO&&L,b===i.THREE&&z,b===i.FOUR&&G)}))),G=n(68174),P=(0,o.observer)((function(e){var t,n={context:e.inputs.context,notificationLocation:e.inputs.location,lineOfBusiness:g(e.inputs.lineOfBusiness),funnelLocation:k(e.inputs.funnelLocation)},a=e.className,r=void 0===a?"":a,o=(0,s.I)(R.Ww,{variables:n}),c=o.data,u=o.error,d=o.loading;if(u||d||!c||!(null==c?void 0:c.notification)||!c.notification.inlineNotification.title)return null;var m=c.notification.inlineNotification,f=m.title,b=m.links,h=m.body,y=null==f?void 0:f.items[0].text,x=(null===(t=null==f?void 0:f.items[1])||void 0===t?void 0:t.text)||"",w=function(t,n,a){return l.createElement(p.b,{padding:{blockstart:"six"}},l.createElement(E.i,{space:"three",direction:t,justifyContent:"space-between"},e.version===i.ONE?null==b?void 0:b.map((function(t,i){return l.createElement(z,{key:"rtb-card-".concat(i),analyticsCallback:e.analyticsCallback,link:t,index:i,minWidth:n,maxWidth:a,version:e.version})})):null==h?void 0:h.map((function(t,i){return l.createElement(z,{key:"rtb-card-".concat(i),analyticsCallback:e.analyticsCallback,body:t,index:i,minWidth:n,maxWidth:a,version:e.version})}))))};return l.createElement("div",{className:r,"data-testid":"reasons-to-believe"},l.createElement("section",null,l.createElement("div",null,l.createElement(v.E,{tag:"h2",size:3},y),e.hasSubtitle&&l.createElement(v.b,null,x),l.createElement(G.LM,null,l.createElement(G.NP,null,w("column","full_width","full_width")),l.createElement(G.rw,null,w("row","third_width","third_width"))))))}));!function(e){e.ONE="one",e.TWO="two",e.THREE="three",e.FOUR="four"}(i||(i={}));var H=(0,o.inject)("analytics","context","page")((function(e){var t=e.analytics,n=e.context,a=e.location,o=e.page,c=e.className,s=void 0===c?"":c,u=e.version,d=void 0===u?i.FOUR:u,m=e.hasSubtitle,f=void 0!==m&&m;if(!o||!o.pageId||!n)return null;var v=x(o);return l.createElement(P,{inputs:{context:(0,r.getBexApiContext)(n),lineOfBusiness:v.lineOfBusiness,funnelLocation:v.funnelLocation,location:a},analyticsCallback:function(e,n){null==t||t.trackEvent(e,n||"RFRR Action Event",t.omnitureData,null,!0)},className:s,version:d,hasSubtitle:f})})),q=function(e){var t=e.reasonsToBelieveVersion,n=void 0===t?i.FOUR:t;return l.createElement(l.Fragment,null,n===i.ONE&&l.createElement(p.b,{padding:{inline:"six"}},l.createElement(W,{location:"IN_PAGE",className:"customerNotificationSquare customerNotificationWithDialog"})),n===i.TWO&&l.createElement(H,{location:"IN_PAGE",className:"reasons-to-believe",version:i.TWO}),n===i.THREE&&l.createElement(H,{location:"IN_PAGE",className:"reasons-to-believe",version:i.THREE}),n===i.FOUR&&l.createElement(H,{location:"IN_PAGE",className:"reasons-to-believe",version:i.FOUR}))},V=n(48826),M=n(22786),K=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,l,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(l)throw l.error}}return r},Y=(0,o.observer)((function(e){var t,n,i=e.templateComponent;if(!i)return null;var r=i.metadata.id,o=i.config,c=o.location,s=o.className,u=o.reasonsToBelieve,d=o.reasonsToBelieveVersion,m=o.title,f=K((0,V.A9)(),1)[0];if(!c)return null;var E=m&&(null===(n=null===(t=null==f?void 0:f.customerNotificationControlState)||void 0===t?void 0:t[c])||void 0===n?void 0:n.state)===M.vF.CustomerNotificationInitialized&&l.createElement(p.b,{padding:{blockend:"three"}},l.createElement(v.E,{tag:"h2",size:3,"data-testid":"customer-notifications-wrapper-title"},m)),b=l.createElement("div",{id:r,className:"ReasonsToBelieveWrapper","data-testid":"reasons-to-believe-wrapper"},E,l.createElement(q,{reasonsToBelieveVersion:d}));return u&&"IN_PAGE"===c?b:l.createElement("div",{id:r,className:"CustomerNotificationsWrapper","data-testid":"customer-notifications-wrapper"},E,l.createElement(a.X,{location:c,className:s}))})),X=Y}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/lotus-home-ui/blossom-customer-notifications.d3d4d3814639c36493b0.js.map